<!DOCTYPE html>
<html>
  <head>   
    
    
    <!-- Here angular and the 3rd party module ui-router are included -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.4/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/1.0.22/angular-ui-router.min.js"></script>
    
    <!-- boostrap 4 javascript source and css styles -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    
    <!-- added font awesome cdn for extra styling (go crazy) -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <link rel="stylesheet" href="styles/main.css">

    <script src="app.js"></script>
    <script src="js/config/states.js"></script>
    <script src="js/controllers/adminController.js"></script>
    <script src="js/controllers/navBarController.js"></script>
    <script src="js/factories/userFactory.js"></script>
    <script src="js/controllers/authController.js"></script>
    <script src="js/factories/authFactory.js"></script>
    <script src="js/controllers/calController.js"></script>
    <script src="js/factories/calFactory.js"></script>
    <script src="js/controllers/addVideoController.js"></script>

    <!-- References fullCalendar library -->
    <link href='libraries/fullcalendar/packages/core/main.css' rel='stylesheet' />
    <link href='libraries/fullcalendar/packages/daygrid/main.css' rel='stylesheet' />
    <link href='libraries/fullcalendar/packages/list/main.css' rel='stylesheet' />
    <script src='libraries/fullcalendar/packages/core/main.js'></script>
    <script src='libraries/fullcalendar/packages/interaction/main.js'></script>
    <script src='libraries/fullcalendar/packages/daygrid/main.js'></script>
    <script src='libraries/fullcalendar/packages/list/main.js'></script>
    <script src='libraries/fullcalendar/packages/google-calendar/main.js'></script>
    
    <!-- This sets the starting url and gets rid of #! -->
    <base href="/"/>

    <!-- Used to init bootstrap popovers-->
    <script>
      $(document).ready(function(){
        $('[data-toggle="popover"]').popover(); 
      });
    </script>     

    

  </head>
 
    
  <body ng-app="SpoderApp">
      <nav class="navbar navbar-expand-sm bg-light navbar-light">
        
          <a ui-sref="Logo" class="navbar-brand" ui-sref-active="active">Entrepreneurship Empowerment</a>
    
          <ul ng-controller="NavbarCtrl" class="navbar-nav ml-auto" ng-if="!currentUser">
            <li class="nav-item" ng-repeat="page in signoutPages">
                <a ui-sref="{{page.ref}}" ui-sref-active="active" class="nav-link">{{page.name}}</a> 
            </li>
            <li>
              <a href="./#abtUs" ui-sref-active="active" class="nav-link">About Us</a> 
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="document.getElementById('signin-modal').style.display='block'">Sign In </a>
            </li>
          </ul>

          <ul ng-controller="NavbarCtrl" class="navbar-nav ml-auto" ng-if="currentUser">
            <li class="nav-item"  ng-repeat="page in signinPages">
                <a ui-sref="{{page.ref}}" ui-sref-active="active" class="nav-link">{{page.name}}</a> 
            </li>
            <li>
              <a href="./#abtUs" ui-sref-active="active" class="nav-link">About Us</a> 
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="document.getElementById('logout-modal').style.display='block'">Log out </a>
            </li>
          </ul>        
      </nav>
    
        
    <!-- This is where code gets injected from html files in /pages -->
   <ui-view></ui-view>

  
   <div id="signin-modal" class="modal signin" ng-show="loginError || !currentUser">
    <form class="modal-content signin-content"  ng-controller="authController" ng-submit="login()" >
      <div class="container">
        <h1>Sign In</h1>
        <h4 class="errorMsg">{{loginError}}</h4>
        <hr>
        <label for="email"><b>Email</b></label>
        <input type="text" placeholder="Enter Email" name="email" required ng-model="login.user.email">
  
        <label for="psw"><b>Password</b></label>
        <input type="password" placeholder="Enter Password" name="psw" required ng-model="login.user.password" >

        <p>Don't have an account? Please create one to access our resources: <a href="createacct" onclick="document.getElementById('signin-modal').style.display='none'" style="color:dodgerblue">Create Account</a></p>
        <div class="clearfix">
            <button type="submit" class="signup fullwidth">Sign In</button>
          <button type="button" onclick="document.getElementById('signin-modal').style.display='none'" ng-click="loginError=undefined" class="cancelbtn">Cancel</button>
        </div>
      </div>
    </form>
  </div>


  <div id="logout-modal" class="modal signin">
      <form class="modal-content signin-content" ng-controller="authController" ng-submit="logout()" >
        <div class="container">
          <h1>Log out</h1>
          <p>Are you sure you wish to logout?</p>
          <div class="clearfix">
              <button type="submit" onclick="document.getElementById('logout-modal').style.display='none'" class="logout fullwidth">Log out</button>
            <button type="button" onclick="document.getElementById('logout-modal').style.display='none'" class="cancelbtn">Cancel</button>
          </div>
        </div>
      </form>
    </div>


  <script>
      // Get the modal
      var signinModal = document.getElementById('signin-modal');
      var logoutModal = document.getElementById('logout-modal');
      
      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
          if (event.target == signinModal){
              signinModal.style.display = "none";
          }
          if(event.target == logoutModal) {
            logoutModal.style.display = "none";
          }
      }
  </script>   
  
    
    
  </body>
</html>
